<!-- views/product.handlebars -->
<h1>{{product.title}}</h1>
<p>Descripción: {{product.description}}</p>
<p>Precio: ${{product.price}}</p>
<p>Categoría: {{product.category}}</p>
<p>Stock: {{product.stock}}</p>
<p>Código: {{product.code}}</p>
<button onclick="addToCart('{{product._id}}')">Agregar al Carrito</button>
<a href="/products">Volver</a>
<script>
    async function addToCart(pid) {
        try {
            const response = await fetch('/api/carts', { method: 'POST' });
            const cart = await response.json();
            await fetch(`/api/carts/${cart.payload._id}/products/${pid}`, { method: 'POST' });
            alert('Producto agregado al carrito');
        } catch (error) {
            alert('Error al agregar al carrito');
        }
    }
</script>